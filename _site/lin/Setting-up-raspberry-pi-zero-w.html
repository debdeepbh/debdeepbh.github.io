
<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Setting up raspberry pi zero w | Debdeep Bhattacharya</title>
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="Setting up raspberry pi zero w" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Ethernet over usb: Follow the popular guide to add two lines related to modules in the first (boot) partition:" />
<meta property="og:description" content="Ethernet over usb: Follow the popular guide to add two lines related to modules in the first (boot) partition:" />
<link rel="canonical" href="http://0.0.0.0:4000/lin/Setting-up-raspberry-pi-zero-w.html" />
<meta property="og:url" content="http://0.0.0.0:4000/lin/Setting-up-raspberry-pi-zero-w.html" />
<meta property="og:site_name" content="Debdeep Bhattacharya" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-09-19T17:24:14-04:00" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"http://0.0.0.0:4000/lin/Setting-up-raspberry-pi-zero-w.html"},"@type":"BlogPosting","url":"http://0.0.0.0:4000/lin/Setting-up-raspberry-pi-zero-w.html","headline":"Setting up raspberry pi zero w","datePublished":"2019-09-19T17:24:14-04:00","dateModified":"2019-09-19T17:24:14-04:00","description":"Ethernet over usb: Follow the popular guide to add two lines related to modules in the first (boot) partition:","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://0.0.0.0:4000/content/pic.jpg"}},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=f2a6b98afb4179cb56c9e8ef1b1e9b5b81034fc9">
    <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1><a href="http://0.0.0.0:4000/">Debdeep Bhattacharya</a></h1>
        <!--
        
          <img src="" alt="Logo" />
        

        <p>Website</p>

	-->
        
        <p class="view"><a href="http://github.com/debdeepbh/debdeepbh.github.io">View the Project on GitHub <small>debdeepbh/debdeepbh.github.io</small></a></p>
        

        

        
      </header>


      <section>


	      <h2> Setting up raspberry pi zero w </h2>

      <h3 id="ethernet-over-usb">Ethernet over usb:</h3>
<p>Follow the popular guide to add two lines related to modules in the first (boot) partition:</p>

<ol>
  <li>open up the boot partition on the micro sd with finder and in the file <code class="highlighter-rouge">config.txt</code> add <code class="highlighter-rouge">dtoverlay=dwc2</code> to a line on the bottom and save it.</li>
  <li>Create a new file called ssh using textedit and save it onto the boot partition. Use ‘get info’ to remove the extension on the file, and it should appear as an EXEC file. You can now eject the card and boot it on your RPi</li>
  <li>Finally, open up the cmdline.txt. replace all text with this:
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dwc_otg.lpm_enable=0 console=serial0,115200 console=tty1 root=/dev/mmcblk0p2 rootfstype=ext4 elevator=deadline fsck.repair=yes rootwait modules-load=dwc2,g_ether quiet init=/usr/lib/raspi-config/init_resize.sh 
</code></pre></div>    </div>
  </li>
  <li>Edit <code class="highlighter-rouge">/etc/network/interfaces</code> to add usb0 related info:
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>allow-hotplug usb0
iface usb0 inet dhcp 
</code></pre></div>    </div>
  </li>
  <li>
    <p>Plug in a <em>good</em> usb cable to the usb port, not the power in and then set up the retrying nm-applet attempt to connect to the wired network and fail repeatedly. At this point, you can connect to the pi using <code class="highlighter-rouge">ssh pi@raspberrypi.local</code>
If the repeated attempt to connect and fail message from <code class="highlighter-rouge">nm-applet</code> is bothersome, run <code class="highlighter-rouge">dhcpcd enp7e0u1i7</code> (or whatever is the hardware name from <code class="highlighter-rouge">ifconfig</code>) on your laptop. Note: <code class="highlighter-rouge">dhcpcd</code> in not installed by default so install it using <code class="highlighter-rouge">sudo apt-get install dhcpcd5</code></p>
  </li>
  <li>For wifi:
Use <code class="highlighter-rouge">wpa_passphrase &lt;ssid_name&gt;</code>  to get the config file. Add it to <code class="highlighter-rouge">/etc/wpa_supplicant/wpa_supplicant.conf</code>
Next, add the following to <code class="highlighter-rouge">/etc/network/interfaces</code>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>auto wlan0
allow-hotplug wlan0
iface wlan0 inet dhcp
wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf
</code></pre></div>    </div>
  </li>
</ol>

<p>You can set up multiple networks in the <code class="highlighter-rouge">wpa_supplicant.conf</code> file and the first available one will be used (I think. Or, maybe w.r.t. signal strength? However, it is working according to order of appearance)</p>


      </section>
      <footer>
        
        <p>This project is maintained by <a href="http://github.com/debdeepbh">debdeepbh</a></p>
        
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="/assets/js/scale.fix.js"></script>
    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-90023312-2', 'auto');
      ga('send', 'pageview');
    </script>
    
  </body>
</html>
